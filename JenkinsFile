pipeline {
    agent any
    stages{
        stage('Git Checkout'){
          steps{
           
             git credentialsId: 'gitcred', url: 'https://github.com/vaish-jain/Jenkins.git'
          }
        }
        
        stage('Build'){
          steps{

             sh "mvn clean install"
             sh "mv target/*.war target/demo.war"
          }
        }

        stage('Upload Artifacts'){
          steps{

             withAWS(credentials: 'AWS-cred', region: 'us-east-2') {
                
               s3Upload acl: 'Private', bucket: 'jenkins-test1', file: 'demo.war', path: 'target/demo.war', text: 'Test upload', workingDir: 'hello-world-war'
             }
          }
        }
    }
}
